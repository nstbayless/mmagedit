name: 'Build'

on:
  push:
    branches: [ master, main, dev, emulator ]
  pull_request:
    branches: [ master, main, dev, emulator ]
  schedule:
    # run every saturday at 4:43 AM
    - cron: '43 4 * * SAT'
  workflow_dispatch: # can run this manually
jobs:  
  # 32-bit windows build
  build-win32:
    runs-on: windows-latest
    steps:
    
    # sdl2
    - name: Cached SDL2
      id: vcpkg-sdl2
      uses: actions/cache@v3
      with:
        path: path: |
          C:/vcpkg/installed/x64-windows/include/SDL2
          C:/vcpkg/installed/x64-windows/bin/SDL2.dll
          C:/vcpkg/installed/x64-windows/bin/SDL2.pdb
          C:/vcpkg/installed/x64-windows/debug/bin/SDL2d.dll
          C:/vcpkg/installed/x64-windows/debug/bin/SDL2d.pdb
          C:/vcpkg/installed/x64-windows/debug/lib/SDL2d.lib
          C:/vcpkg/installed/x64-windows/debug/lib/manual-link/SDL2d.lib
          C:/vcpkg/installed/x64-windows/lib/SDL2.lib
          C:/vcpkg/installed/x64-windows/lib/manual-link/SDL2main.lib
          some/other/dependencies
        key: ${{ runner.os }}-vcpkg-sdl2

    - name: Install SDL2
      if: steps.vcpkg-sdl2.outputs.cache-hit != 'true'
    - run: vcpkg install sdl2 --triplet x64-windows
    
    - run: tree /f /a C:/vcpkg/installed/
    - run: tree /f /a C:/vcpkg/
        